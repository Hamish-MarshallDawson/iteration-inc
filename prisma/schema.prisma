generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Devices {
  DeviceID        Int               @id @default(autoincrement())
  UserID          Int?
  DeviceName      String?           @db.VarChar(100)
  DeviceType      devicetype?
  Status          status?
  EnergyUsed      String?
  RoomID          Int?
  Rooms           Rooms?            @relation(fields: [RoomID], references: [RoomID], onDelete: NoAction, onUpdate: NoAction, map: "RoomID")
  Users           Users?            @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "UserID")
  EnergyUse       EnergyUse[]
  Recommendations Recommendations[]
  Schedules       Schedules[]
}

model EnergyUse {
  EnergyUseID Int       @id(map: "Energy Use_pkey") @default(autoincrement())
  DeviceID    Int?
  UserID      Int?
  Timestamp   DateTime? @db.Timestamp(6)
  EnergyUsed  Decimal?  @db.Decimal
  Devices     Devices?  @relation(fields: [DeviceID], references: [DeviceID], onDelete: NoAction, onUpdate: NoAction, map: "DeviceID")
  Users       Users?    @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "UserID")
}

model Recommendations {
  RecID            Int      @id @default(autoincrement())
  UserID           Int?
  DeviceID         Int?
  DeviceConditions String?
  EnvConditions    String?
  SuggestedAction  String?
  Devices          Devices? @relation(fields: [DeviceID], references: [DeviceID], onDelete: NoAction, onUpdate: NoAction, map: "DeviceID")
  Users            Users?   @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "UserID")
}

model Rooms {
  RoomID   Int       @id @default(autoincrement())
  RoomName String?   @db.VarChar(100)
  Devices  Devices[]
}

model Schedules {
  ScheduleID Int       @id @default(autoincrement())
  DeviceID   Int?
  UserID     Int?
  Frequency  freq?
  StartTime  DateTime? @db.Timestamp(6)
  EndTime    DateTime? @db.Timestamp(6)
  Devices    Devices?  @relation(fields: [DeviceID], references: [DeviceID], onDelete: NoAction, onUpdate: NoAction, map: "DeviceID")
  Users      Users?    @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "UserID")
}

model SecurityLogs {
  LogID            Int       @id(map: "Security Logs_pkey") @default(autoincrement())
  UserID           Int?
  EventDescription String?
  Timestamp        DateTime? @db.Timestamp(6)
  Users            Users?    @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "constraint_1")
}

model UserActivity {
  ActivityID Int       @id(map: "User Activity_pkey") @default(autoincrement())
  UserID     Int?
  DeviceID   String?
  Timestamp  DateTime? @db.Timestamp(6)
  Action     action?
  Users      Users?    @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "UserID")
}

model Users {
  UserID          Int               @id(map: "Uses_pkey") @default(autoincrement())
  FirstName       String            @db.VarChar(25)
  LastName        String            @db.VarChar(32)
  Email           String            @db.VarChar(100)
  Password        String?           @db.VarChar(100)
  EnergyGoal      Decimal?          @db.Decimal
  UserType        usertype?
  Awards          Awards[]
  Devices         Devices[]
  EnergyUse       EnergyUse[]
  Recommendations Recommendations[]
  Schedules       Schedules[]
  SecurityLogs    SecurityLogs[]
  UserActivity    UserActivity[]
}

model Usertest {
  id String @id
}

model Awards {
  AwardID     Int        @id @default(autoincrement())
  UserID      Int
  Title       String     @db.VarChar(100)
  Description String?
  Icon        String?    @db.VarChar(200)
  IsUnlocked  Boolean?   @default(false)
  DateEarned  DateTime?  @db.Timestamp(6)
  Condition   Json       @db.Json
  Type        awardtype
  Level       awardlevel
  Users       Users      @relation(fields: [UserID], references: [UserID], onDelete: Cascade, onUpdate: NoAction)
}

enum Action {
  Turn_On  @map("Turn On")
  Turn_Off @map("Turn Off")
}

enum Frequency {
  Once
  Daily
  Weekly
  Monthly
}

enum Status {
  Online
  Offline
  Defective
}

enum User_Type {
  Home_Dweller @map("Home Dweller")
  Home_Manager @map("Home Manager")
  Admin

  @@map("User Type")
}

enum UserType {
  Home_Dweller @map("Home Dweller")
  Home_Manager @map("Home Manager")
  Admin
}

enum action {
  Turn_On  @map("Turn On")
  Turn_Off @map("Turn Off")
}

enum devicetype {
  Light
  Thermostat
  Robot
  Speaker
  Coffee_Machine @map("Coffee Machine")
  Other
}

enum freq {
  Once
  Daily
  Weekly
  Monthly
}

enum status {
  Online
  Offline
  Defective
}

enum usertype {
  Home_Dweller @map("Home Dweller")
  Home_Manager @map("Home Manager")
  Admin
}

enum AwardLevel {
  Bronze
  Silver
  Gold
}

enum AwardType_ {
  Badge
  Trophy

  @@map("AwardType ")
}

enum awardlevel {
  Bronze
  Silver
  Gold
}

enum awardtype {
  Badge
  Trophy
}
